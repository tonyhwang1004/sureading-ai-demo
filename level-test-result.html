<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î†àÎ≤®ÌÖåÏä§Ìä∏ Í≤∞Í≥º - Sue Reading Academy</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }

        .result-container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .result-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .result-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .result-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: #333;
        }

        .student-info {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 10px;
        }

        .book-info {
            font-size: 1.1rem;
            color: #667eea;
            font-weight: 600;
        }

        .score-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        }

        .score-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .score-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .score-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .score-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .score-label {
            font-size: 1rem;
            color: #666;
            font-weight: 500;
        }

        .grade-display {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border-radius: 50%;
            width: 120px;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: 700;
            margin: 0 auto 20px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .pass-status {
            font-size: 1.5rem;
            font-weight: 600;
            padding: 15px 30px;
            border-radius: 25px;
            margin: 20px auto;
            max-width: 300px;
            text-align: center;
        }

        .pass-status.passed {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
        }

        .pass-status.failed {
            background: linear-gradient(45deg, #dc3545, #c82333);
            color: white;
        }

        .chapter-analysis {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 25px;
            color: #333;
            text-align: center;
        }

        .chapter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
        }

        .chapter-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .chapter-card.excellent {
            border-color: #28a745;
            background: linear-gradient(135deg, #28a74510, #20c99710);
        }

        .chapter-card.good {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea10, #764ba210);
        }

        .chapter-card.needs-work {
            border-color: #ffc107;
            background: linear-gradient(135deg, #ffc10710, #fd7e1410);
        }

        .chapter-card.poor {
            border-color: #dc3545;
            background: linear-gradient(135deg, #dc354510, #c8233310);
        }

        .chapter-number {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .chapter-score {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .chapter-detail {
            font-size: 0.9rem;
            color: #666;
        }

        .recommendations {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        }

        .recommendation-text {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #333;
            margin-bottom: 25px;
            text-align: center;
        }

        .strengths-weaknesses {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .strength-list, .weakness-list {
            background: white;
            border-radius: 15px;
            padding: 25px;
        }

        .strength-list {
            border-left: 4px solid #28a745;
        }

        .weakness-list {
            border-left: 4px solid #dc3545;
        }

        .list-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .list-item {
            background: #f8f9fa;
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            min-width: 160px;
            text-align: center;
        }

        .primary-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .secondary-btn {
            background: #6c757d;
            color: white;
        }

        .success-btn {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
        }

        .action-btn:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .test-details {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
        }

        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .detail-item {
            text-align: center;
            padding: 15px;
        }

        .detail-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }

        .detail-value {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
        }

        @media (max-width: 768px) {
            .result-container {
                padding: 10px;
            }
            
            .result-header, .score-section, .chapter-analysis, .recommendations {
                padding: 25px 20px;
            }
            
            .strengths-weaknesses {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .grade-display {
                width: 100px;
                height: 100px;
                font-size: 2.5rem;
            }
        }
    </style>
    <!-- SureReading ÏÉà ÏãúÏä§ÌÖú Î≤àÎì§ -->
    <script src="static/js/books-bundle.js"></script>
    <script src="static/js/user-manager.js"></script>
</head>
<body>
    <div class="result-container">
        <!-- Í≤∞Í≥º Ìó§Îçî -->
        <div class="result-header">
            <div class="result-icon" id="result-icon">üéâ</div>
            <h1 class="result-title" id="result-title">ÌÖåÏä§Ìä∏ ÏôÑÎ£å!</h1>
            <div class="student-info" id="student-info">ÌôçÍ∏∏ÎèôÎãòÏùò Î†àÎ≤®ÌÖåÏä§Ìä∏ Í≤∞Í≥º</div>
            <div class="book-info" id="book-info">The Book Thief by Markus Zusak</div>
        </div>

        <!-- Ï†êÏàò ÏÑπÏÖò -->
        <div class="score-section">
            <div class="grade-display" id="grade-display">B+</div>
            <div class="pass-status passed" id="pass-status">üéä Ìï©Í≤©! Ï∂ïÌïòÌï©ÎãàÎã§!</div>
            
            <div class="score-grid">
                <div class="score-card">
                    <div class="score-value" id="correct-answers" style="color: #28a745;">48</div>
                    <div class="score-label">Ï†ïÎãµ Ïàò</div>
                </div>
                <div class="score-card">
                    <div class="score-value" id="total-questions" style="color: #667eea;">60</div>
                    <div class="score-label">Ï¥ù Î¨∏Ï†ú</div>
                </div>
                <div class="score-card">
                    <div class="score-value" id="percentage" style="color: #fd7e14;">80%</div>
                    <div class="score-label">Ï†ïÎãµÎ•†</div>
                </div>
                <div class="score-card">
                    <div class="score-value" id="time-spent" style="color: #6f42c1;">75Î∂Ñ</div>
                    <div class="score-label">ÏÜåÏöî ÏãúÍ∞Ñ</div>
                </div>
            </div>
        </div>

        <!-- ÌÖåÏä§Ìä∏ ÏÉÅÏÑ∏ Ï†ïÎ≥¥ -->
        <div class="test-details">
            <div class="detail-grid">
                <div class="detail-item">
                    <div class="detail-label">ÌÖåÏä§Ìä∏ ÎÇ†Ïßú</div>
                    <div class="detail-value" id="test-date">2024.06.18</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Î†àÎ≤®</div>
                    <div class="detail-value" id="test-level">Level 5</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Ìï©Í≤© Í∏∞Ï§Ä</div>
                    <div class="detail-value">80% Ïù¥ÏÉÅ</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Îì±Í∏â</div>
                    <div class="detail-value" id="final-grade">B+</div>
                </div>
            </div>
        </div>

        <!-- Ï±ïÌÑ∞Î≥Ñ Î∂ÑÏÑù -->
        <div class="chapter-analysis">
            <h2 class="section-title">üìä Ï±ïÌÑ∞Î≥Ñ ÏÑ±Í≥º Î∂ÑÏÑù</h2>
            <div class="chapter-grid" id="chapter-grid">
                <div class="chapter-card excellent">
                    <div class="chapter-number">Chapter 1</div>
                    <div class="chapter-score" style="color: #28a745;">11/12</div>
                    <div class="chapter-detail">92% - Ïö∞Ïàò</div>
                </div>
                <div class="chapter-card good">
                    <div class="chapter-number">Chapter 2</div>
                    <div class="chapter-score" style="color: #667eea;">10/12</div>
                    <div class="chapter-detail">83% - ÏñëÌò∏</div>
                </div>
                <div class="chapter-card good">
                    <div class="chapter-number">Chapter 3</div>
                    <div class="chapter-score" style="color: #667eea;">9/12</div>
                    <div class="chapter-detail">75% - ÏñëÌò∏</div>
                </div>
                <div class="chapter-card needs-work">
                    <div class="chapter-number">Chapter 4</div>
                    <div class="chapter-score" style="color: #ffc107;">9/12</div>
                    <div class="chapter-detail">75% - Î≥¥ÏôÑÌïÑÏöî</div>
                </div>
                <div class="chapter-card good">
                    <div class="chapter-number">Chapter 5</div>
                    <div class="chapter-score" style="color: #667eea;">9/12</div>
                    <div class="chapter-detail">75% - ÏñëÌò∏</div>
                </div>
            </div>
        </div>

        <!-- Ï∂îÏ≤úÏÇ¨Ìï≠ -->
        <div class="recommendations">
            <h2 class="section-title">üí° ÌïôÏäµ Î∂ÑÏÑù Î∞è Ï∂îÏ≤úÏÇ¨Ìï≠</h2>
            
            <div class="recommendation-text" id="recommendation-text">
                Ï∂ïÌïòÌï©ÎãàÎã§! The Book Thief ÌÖåÏä§Ìä∏Î•º ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÌÜµÍ≥ºÌïòÏÖ®ÏäµÎãàÎã§. 
                Ï†ÑÎ∞òÏ†ÅÏúºÎ°ú Ïö∞ÏàòÌïú ÎèÖÌï¥ Ïã§Î†•ÏùÑ Î≥¥Ïó¨Ï£ºÏÖ®ÏúºÎ©∞, ÌäπÌûà Ïä§ÌÜ†Î¶¨Ïùò Ï¥àÎ∞òÎ∂Ä Ïù¥Ìï¥Í∞Ä Îõ∞Ïñ¥ÎÇ©ÎãàÎã§.
                Îã§Ïùå Î†àÎ≤®Ïùò ÎèÑÏÑúÏóê ÎèÑÏ†ÑÌïòÍ±∞ÎÇò Í∞ôÏùÄ Î†àÎ≤®Ïùò Îã§Î•∏ ÏûëÌíàÏùÑ ÏùΩÏñ¥Î≥¥ÏãúÍ∏∞Î•º Ï∂îÏ≤úÌï©ÎãàÎã§.
            </div>

            <div class="strengths-weaknesses">
                <div class="strength-list">
                    <div class="list-title">
                        <span>üí™</span>
                        <span>Í∞ïÏ†ê ÏòÅÏó≠</span>
                    </div>
                    <div class="list-item">Chapter 1: Îì±Ïû•Ïù∏Î¨º Ïù¥Ìï¥</div>
                    <div class="list-item">Chapter 2: Ïä§ÌÜ†Î¶¨ Ï†ÑÍ∞ú</div>
                    <div class="list-item">Ï†ÑÎ∞òÏ†ÅÏù∏ ÎèÖÌï¥Î†•</div>
                </div>
                
                <div class="weakness-list">
                    <div class="list-title">
                        <span>üìà</span>
                        <span>Î≥¥ÏôÑ ÏòÅÏó≠</span>
                    </div>
                    <div class="list-item">Chapter 4: Î≥µÏû°Ìïú Í¥ÄÍ≥Ñ Ïù¥Ìï¥</div>
                    <div class="list-item">Í≥†Í∏â Ïñ¥Ìúò ÌïôÏäµ</div>
                    <div class="list-item">Î¨∏Îß• Ï∂îÎ°† Îä•Î†•</div>
                </div>
            </div>

            <div class="action-buttons">
                <a href="/level-test" class="action-btn secondary-btn">
                    üîÑ Îã§Î•∏ ÌÖåÏä§Ìä∏ Î≥¥Í∏∞
                </a>
                <a href="/" class="action-btn primary-btn">
                    üè† ÌôàÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
                </a>
                <a href="#" class="action-btn success-btn" onclick="printResult()">
                    üñ®Ô∏è Í≤∞Í≥º Ï∂úÎ†•ÌïòÍ∏∞
                </a>
            </div>
        </div>
    </div>

    <script>
        // Í≤∞Í≥º Îç∞Ïù¥ÌÑ∞ Î°úÎìú Î∞è ÌëúÏãú
        function loadTestResults() {
            // sessionStorageÏóêÏÑú Í≤∞Í≥º Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞
            const results = JSON.parse(sessionStorage.getItem('levelTestResults') || '{}');
            
            if (Object.keys(results).length === 0) {
                // Í≤∞Í≥º Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏúºÎ©¥ ÏÉòÌîå Îç∞Ïù¥ÌÑ∞ ÏÇ¨Ïö©
                displaySampleResults();
                return;
            }
            
            // Ïã§Ï†ú Í≤∞Í≥º ÌëúÏãú
            displayResults(results);
        }

        function displaySampleResults() {
            // ÏÉòÌîå Í≤∞Í≥º Îç∞Ïù¥ÌÑ∞ (Ïã§Ï†úÎ°úÎäî ÏÑúÎ≤ÑÏóêÏÑú Î∞õÏïÑÏò¥)
            const sampleResults = {
                student_name: 'ÌôçÍ∏∏Îèô',
                book_title: 'The Book Thief',
                book_author: 'Markus Zusak',
                level: 5,
                correct_answers: 48,
                total_questions: 60,
                percentage: 80,
                grade: 'B',
                passed: true,
                time_spent: 75 * 60, // 75Î∂ÑÏùÑ Ï¥àÎ°ú Î≥ÄÌôò
                chapter_analysis: {
                    chapter_1: { correct: 11, total: 12, percentage: 91.7 },
                    chapter_2: { correct: 10, total: 12, percentage: 83.3 },
                    chapter_3: { correct: 9, total: 12, percentage: 75.0 },
                    chapter_4: { correct: 9, total: 12, percentage: 75.0 },
                    chapter_5: { correct: 9, total: 12, percentage: 75.0 }
                }
            };
            
            displayResults(sampleResults);
        }

        function displayResults(results) {
            // Í∏∞Î≥∏ Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
            document.getElementById('student-info').textContent = `${results.student_name}ÎãòÏùò Î†àÎ≤®ÌÖåÏä§Ìä∏ Í≤∞Í≥º`;
            document.getElementById('book-info').textContent = `${results.book_title} by ${results.book_author}`;
            
            // Ï†êÏàò Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
            document.getElementById('correct-answers').textContent = results.correct_answers;
            document.getElementById('total-questions').textContent = results.total_questions;
            document.getElementById('percentage').textContent = `${results.percentage}%`;
            
            const timeMinutes = Math.floor(results.time_spent / 60);
            document.getElementById('time-spent').textContent = `${timeMinutes}Î∂Ñ`;
            
            // Îì±Í∏â Î∞è Ìï©Í≤© ÏÉÅÌÉú
            document.getElementById('grade-display').textContent = results.grade;
            document.getElementById('final-grade').textContent = results.grade;
            
            const passStatus = document.getElementById('pass-status');
            const resultIcon = document.getElementById('result-icon');
            const resultTitle = document.getElementById('result-title');
            
            if (results.passed) {
                passStatus.className = 'pass-status passed';
                passStatus.innerHTML = 'üéä Ìï©Í≤©! Ï∂ïÌïòÌï©ÎãàÎã§!';
                resultIcon.textContent = 'üéâ';
                resultTitle.textContent = 'ÌÖåÏä§Ìä∏ ÌÜµÍ≥º!';
            } else {
                passStatus.className = 'pass-status failed';
                passStatus.innerHTML = 'üìö Ïû¨ÏãúÌóò Í∂åÏû•';
                resultIcon.textContent = 'üìñ';
                resultTitle.textContent = 'Ï°∞Í∏à Îçî ÎÖ∏Î†•Ìï¥Î≥¥ÏÑ∏Ïöî!';
            }
            
            // ÌÖåÏä§Ìä∏ ÎÇ†Ïßú
            const today = new Date();
            document.getElementById('test-date').textContent = 
                `${today.getFullYear()}.${String(today.getMonth() + 1).padStart(2, '0')}.${String(today.getDate()).padStart(2, '0')}`;
            
            document.getElementById('test-level').textContent = `Level ${results.level}`;
            
            // Ï±ïÌÑ∞Î≥Ñ Î∂ÑÏÑù ÏóÖÎç∞Ïù¥Ìä∏
            updateChapterAnalysis(results.chapter_analysis);
            
            // Ï∂îÏ≤úÏÇ¨Ìï≠ ÏóÖÎç∞Ïù¥Ìä∏
            updateRecommendations(results);
        }

        function updateChapterAnalysis(chapterData) {
            const chapterGrid = document.getElementById('chapter-grid');
            chapterGrid.innerHTML = '';
            
            for (let i = 1; i <= 5; i++) {
                const chapter = chapterData[`chapter_${i}`];
                if (chapter) {
                    const percentage = chapter.percentage;
                    let className = 'chapter-card ';
                    let color = '';
                    let status = '';
                    
                    if (percentage >= 90) {
                        className += 'excellent';
                        color = '#28a745';
                        status = 'Ïö∞Ïàò';
                    } else if (percentage >= 80) {
                        className += 'good';
                        color = '#667eea';
                        status = 'ÏñëÌò∏';
                    } else if (percentage >= 70) {
                        className += 'needs-work';
                        color = '#ffc107';
                        status = 'Î≥¥ÏôÑÌïÑÏöî';
                    } else {
                        className += 'poor';
                        color = '#dc3545';
                        status = 'ÎØ∏Ìù°';
                    }
                    
                    const chapterCard = document.createElement('div');
                    chapterCard.className = className;
                    chapterCard.innerHTML = `
                        <div class="chapter-number">Chapter ${i}</div>
                        <div class="chapter-score" style="color: ${color};">${chapter.correct}/${chapter.total}</div>
                        <div class="chapter-detail">${Math.round(percentage)}% - ${status}</div>
                    `;
                    
                    chapterGrid.appendChild(chapterCard);
                }
            }
        }

        function updateRecommendations(results) {
            let recommendationText = '';
            
            if (results.passed) {
                recommendationText = `Ï∂ïÌïòÌï©ÎãàÎã§! ${results.book_title} ÌÖåÏä§Ìä∏Î•º ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÌÜµÍ≥ºÌïòÏÖ®ÏäµÎãàÎã§. 
                    Ï†ÑÎ∞òÏ†ÅÏúºÎ°ú Ïö∞ÏàòÌïú ÎèÖÌï¥ Ïã§Î†•ÏùÑ Î≥¥Ïó¨Ï£ºÏÖ®ÏúºÎ©∞, Îã§Ïùå Î†àÎ≤®Ïùò ÎèÑÏÑúÏóê ÎèÑÏ†ÑÌïòÍ±∞ÎÇò 
                    Í∞ôÏùÄ Î†àÎ≤®Ïùò Îã§Î•∏ ÏûëÌíàÏùÑ ÏùΩÏñ¥Î≥¥ÏãúÍ∏∞Î•º Ï∂îÏ≤úÌï©ÎãàÎã§.`;
            } else {
                recommendationText = `${results.book_title}Î•º Îã§Ïãú Ìïú Î≤à ÏùΩÏñ¥Î≥¥ÏãúÍ≥† 
                    ÌäπÌûà ÏïΩÏ†êÏúºÎ°ú ÎÇòÌÉÄÎÇú Ï±ïÌÑ∞Îì§ÏùÑ Ï§ëÏ†êÏ†ÅÏúºÎ°ú Î≥µÏäµÌïòÏã† ÌõÑ Ïû¨ÏãúÌóòÏùÑ Î≥¥ÏãúÍ∏∞Î•º Ï∂îÏ≤úÌï©ÎãàÎã§.`;
            }
            
            document.getElementById('recommendation-text').textContent = recommendationText;
        }

        function printResult() {
            window.print();
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Í≤∞Í≥º ÌëúÏãú
        window.addEventListener('load', loadTestResults);
    </script>
</body>
</html>
