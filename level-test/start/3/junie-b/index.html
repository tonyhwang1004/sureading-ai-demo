<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sue Reading Academy - Level Test (60 Questions)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .test-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .test-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 20px 30px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .test-info {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .student-name {
            font-size: 1.4rem;
            font-weight: 700;
            color: #333;
        }

        .book-info {
            font-size: 1.1rem;
            color: #667eea;
            font-weight: 600;
        }

        .progress-info {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 0.95rem;
            color: #666;
        }

        .timer {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 1.1rem;
            min-width: 100px;
            text-align: center;
        }

        .stats-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 15px 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            text-align: center;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #667eea;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #666;
        }

        .progress-bar-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 15px 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-size: 0.9rem;
            color: #666;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 10px;
            transition: width 0.5s ease;
            width: 1.67%;
        }

        .question-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 25px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            flex: 1;
        }

        .question-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .question-number {
            font-size: 1.2rem;
            font-weight: 600;
            color: #667eea;
        }

        .chapter-info {
            background: #f8f9fa;
            color: #495057;
            padding: 6px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .question-text {
            font-size: 1.3rem;
            line-height: 1.6;
            color: #333;
            margin-bottom: 30px;
            font-weight: 500;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }

        .option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 18px 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .option:hover {
            border-color: #667eea;
            background: #f8f9ff;
            transform: translateX(5px);
        }

        .option.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea15, #764ba215);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.2);
        }

        .option.correct {
            border-color: #28a745 !important;
            background: linear-gradient(135deg, #28a74515, #20c99715) !important;
        }

        .option.wrong {
            border-color: #dc3545 !important;
            background: linear-gradient(135deg, #dc354515, #c8252515) !important;
        }

        .option-letter {
            width: 40px;
            height: 40px;
            background: #e9ecef;
            color: #495057;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .option.selected .option-letter {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .option.correct .option-letter {
            background: #28a745 !important;
            color: white;
        }

        .option.wrong .option-letter {
            background: #dc3545 !important;
            color: white;
        }

        .option-text {
            flex: 1;
            font-size: 1.1rem;
            line-height: 1.5;
        }

        .answer-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }

        .answer-section.show {
            display: block;
        }

        .answer-feedback {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .correct-icon {
            background: #28a745;
        }

        .wrong-icon {
            background: #dc3545;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 20px 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .nav-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 140px;
        }

        .prev-btn {
            background: #6c757d;
            color: white;
        }

        .next-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .submit-btn {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
        }

        .check-btn {
            background: linear-gradient(45deg, #ffc107, #fd7e14);
            color: white;
        }

        .nav-btn:hover:not(:disabled) {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <!-- ÌÖåÏä§Ìä∏ Ìó§Îçî -->
        <div class="test-header">
            <div class="test-info">
                <div class="student-name" id="student-name">ÌïôÏÉùÎãòÏùò Î†àÎ≤®ÌÖåÏä§Ìä∏</div>
                <div class="book-info" id="book-info">Magic Tree House by Mary Pope Osborne</div>
                <div class="progress-info">
                    <span>Level <span id="current-level">3</span></span>
                    <span>‚Ä¢</span>
                    <span>Î¨∏Ï†ú <span id="current-question">1</span>/60</span>
                </div>
            </div>
            <div class="timer" id="timer">90:00</div>
        </div>

        <!-- ÌÜµÍ≥Ñ Ìå®ÎÑê -->
        <div class="stats-panel">
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value" id="answered-count">0</div>
                    <div class="stat-label">ÎãµÎ≥Ä ÏôÑÎ£å</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="remaining-count">60</div>
                    <div class="stat-label">ÎÇ®ÏùÄ Î¨∏Ï†ú</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="progress-percent">1.7%</div>
                    <div class="stat-label">ÏßÑÌñâÎ•†</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="current-chapter">Ch.1</div>
                    <div class="stat-label">ÌòÑÏû¨ Ï±ïÌÑ∞</div>
                </div>
            </div>
        </div>

        <!-- ÏßÑÌñâÎ•† Î∞î -->
        <div class="progress-bar-container">
            <div class="progress-text">
                <span>Ï†ÑÏ≤¥ ÏßÑÌñâÎ•†</span>
                <span id="progress-display">1/60 (1.7%)</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
        </div>

        <!-- Î¨∏Ï†ú Ïπ¥Îìú -->
        <div class="question-card">
            <div class="question-meta">
                <div class="question-number" id="question-number">Î¨∏Ï†ú 1</div>
                <div class="chapter-info" id="chapter-info">Chapter 1</div>
            </div>

            <div class="question-text" id="question-text">
                Î¨∏Ï†úÎ•º Î∂àÎü¨Ïò§Îäî Ï§ë...
            </div>

            <div class="options-container" id="options-container">
                <!-- ÏÑ†ÌÉùÏßÄÎì§Ïù¥ ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
            </div>

            <!-- Ï†ïÎãµ ÌôïÏù∏ ÏÑπÏÖò -->
            <div class="answer-section" id="answer-section">
                <div class="answer-feedback" id="answer-feedback">
                    <!-- Ï†ïÎãµ/Ïò§Îãµ ÌîºÎìúÎ∞± -->
                </div>
            </div>
        </div>

        <!-- ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
        <div class="navigation">
            <button class="nav-btn prev-btn" id="prev-btn" onclick="previousQuestion()" disabled>
                ‚¨ÖÔ∏è Ïù¥Ï†Ñ Î¨∏Ï†ú
            </button>

            <div style="text-align: center; color: #666; font-size: 0.9rem;">
                <span id="book-title">Magic Tree House</span>
            </div>

            <button class="nav-btn check-btn" id="check-btn" onclick="checkAnswer()">
                ‚úÖ Ï†ïÎãµ ÌôïÏù∏
            </button>

            <button class="nav-btn next-btn" id="next-btn" onclick="nextQuestion()" style="display: none;">
                Îã§Ïùå Î¨∏Ï†ú ‚û°Ô∏è
            </button>
        </div>
    </div>

    <script>
        // ================ 60Í∞ú Î¨∏Ï†ú Îç∞Ïù¥ÌÑ∞ (Í∞ïÌôîÎêú Ï¥àÍ∏∞Ìôî) ================
        const TOTAL_QUESTIONS = 60;
        
        // Ï¶âÏãú Ïã§ÌñâÎêòÎäî Î¨∏Ï†ú Îç∞Ïù¥ÌÑ∞ Ï¥àÍ∏∞Ìôî
        const allQuestions = (() => {
            console.log('üéØ Î¨∏Ï†ú Îç∞Ïù¥ÌÑ∞ Ï¥àÍ∏∞Ìôî ÏãúÏûë...');
            
            const questions = [];
            
            // Chapter 1 Î¨∏Ï†úÎì§ (12Í∞ú)
            const chapter1 = [
                "Who are the main characters in Magic Tree House?",
                "Where do Jack and Annie find the tree house?",
                "What is special about the tree house?",
                "How do Jack and Annie travel in time?", 
                "What does Jack always carry with him?",
                "How is Jack's personality described?",
                "How is Annie's personality described?",
                "What happens when they go on their first adventure?",
                "What time period do they visit first?",
                "How do they get back home?",
                "What does Jack like to do during adventures?",
                "Who is more cautious?"
            ];
            
            chapter1.forEach((q, i) => {
                questions.push({
                    id: i + 1,
                    chapter: 1,
                    question: q,
                    options: [
                        `Option A for question ${i + 1}`,
                        `Option B for question ${i + 1}`,
                        `Option C for question ${i + 1}`,
                        `Option D for question ${i + 1}`
                    ],
                    correct: Math.floor(Math.random() * 4) // ÎûúÎç§ Ï†ïÎãµ (ÌÖåÏä§Ìä∏Ïö©)
                });
            });
            
            // Chapter 2 Î¨∏Ï†úÎì§ (12Í∞ú)
            const chapter2 = [
                "Where do Jack and Annie go in their second adventure?",
                "What do they wear in medieval times?",
                "Who do they meet at the castle?",
                "What is happening at the castle?",
                "What does Annie want to do at the castle?",
                "What does Jack worry about?",
                "What do they learn about medieval life?",
                "How do people at the castle treat them?",
                "What does Jack write about?",
                "How do they escape danger?",
                "What do they bring back from medieval times?",
                "How do they feel about their adventure?"
            ];
            
            chapter2.forEach((q, i) => {
                questions.push({
                    id: i + 13,
                    chapter: 2,
                    question: q,
                    options: [
                        `Option A for question ${i + 13}`,
                        `Option B for question ${i + 13}`,
                        `Option C for question ${i + 13}`,
                        `Option D for question ${i + 13}`
                    ],
                    correct: Math.floor(Math.random() * 4)
                });
            });
            
            // Chapter 3 Î¨∏Ï†úÎì§ (12Í∞ú)
            const chapter3 = [
                "Where do they travel in their third adventure?",
                "What do they see in ancient Egypt?",
                "Who helps them in Egypt?",
                "What is the cat's name?",
                "Where does the cat lead them?",
                "What do they find inside the pyramid?",
                "What danger do they face?",
                "How does the cat help them?",
                "What do they learn about ancient Egypt?",
                "How do they escape the pyramid?",
                "What does Jack document?",
                "How do they return to the tree house?"
            ];
            
            chapter3.forEach((q, i) => {
                questions.push({
                    id: i + 25,
                    chapter: 3,
                    question: q,
                    options: [
                        `Option A for question ${i + 25}`,
                        `Option B for question ${i + 25}`,
                        `Option C for question ${i + 25}`,
                        `Option D for question ${i + 25}`
                    ],
                    correct: Math.floor(Math.random() * 4)
                });
            });
            
            // Chapter 4 Î¨∏Ï†úÎì§ (12Í∞ú)
            const chapter4 = [
                "What new place do they visit?",
                "What animals do they meet in the rainforest?",
                "What is their mission in the rainforest?",
                "Who do they meet in the rainforest?",
                "What danger threatens the rainforest?",
                "How do the animals communicate?",
                "What does Annie discover about animals?",
                "What does Jack learn about ecosystems?",
                "How do they help in the rainforest?",
                "What weather challenges do they face?",
                "What important lesson do they learn?",
                "How do they return home this time?"
            ];
            
            chapter4.forEach((q, i) => {
                questions.push({
                    id: i + 37,
                    chapter: 4,
                    question: q,
                    options: [
                        `Option A for question ${i + 37}`,
                        `Option B for question ${i + 37}`,
                        `Option C for question ${i + 37}`,
                        `Option D for question ${i + 37}`
                    ],
                    correct: Math.floor(Math.random() * 4)
                });
            });
            
            // Chapter 5 Î¨∏Ï†úÎì§ (12Í∞ú)
            const chapter5 = [
                "Where is their final adventure in this book?",
                "What is special about the Titanic adventure?",
                "Who do they meet on the Titanic?",
                "What do they know will happen to the ship?",
                "How do they try to help?",
                "What do they learn about courage?",
                "How do people on the ship behave?",
                "What do Jack and Annie do to help?",
                "How do they escape the sinking ship?",
                "What do they learn from all their adventures?",
                "How do they feel about the tree house now?",
                "What is the main theme of Magic Tree House?"
            ];
            
            chapter5.forEach((q, i) => {
                questions.push({
                    id: i + 49,
                    chapter: 5,
                    question: q,
                    options: [
                        `Option A for question ${i + 49}`,
                        `Option B for question ${i + 49}`,
                        `Option C for question ${i + 49}`,
                        `Option D for question ${i + 49}`
                    ],
                    correct: Math.floor(Math.random() * 4)
                });
            });
            
            console.log(`‚úÖ Ï¥ù ${questions.length}Í∞ú Î¨∏Ï†ú ÏÉùÏÑ± ÏôÑÎ£å`);
            return questions;
        })();

        // ================ ÌÖåÏä§Ìä∏ ÏÉÅÌÉú Î≥ÄÏàò ================
        let currentQuestionIndex = 0;
        let userAnswers = new Array(TOTAL_QUESTIONS);
        let timeRemaining = 90 * 60; // 90Î∂Ñ
        let timerInterval;
        let answerChecked = false;

        // ================ Ï¥àÍ∏∞Ìôî Ìï®Ïàò ================
        function init() {
            console.log('üöÄ ÌÖåÏä§Ìä∏ ÏãúÏä§ÌÖú Ï¥àÍ∏∞Ìôî ÏãúÏûë...');
            console.log(`üìö Î°úÎìúÎêú Î¨∏Ï†ú Ïàò: ${allQuestions.length}`);
            
            if (allQuestions.length !== TOTAL_QUESTIONS) {
                console.error(`‚ùå Î¨∏Ï†ú Ïàò Ïò§Î•ò: ${allQuestions.length}Í∞ú (${TOTAL_QUESTIONS}Í∞ú ÌïÑÏöî)`);
                alert(`Î¨∏Ï†ú Î°úÎìú Ïò§Î•ò: ${allQuestions.length}Í∞úÎßå Î°úÎìúÎê® (60Í∞ú ÌïÑÏöî)`);
                return;
            }
            
            showQuestion(0);
            startTimer();
            
            console.log('‚úÖ Ï¥àÍ∏∞Ìôî ÏôÑÎ£å');
        }

        // ================ Î¨∏Ï†ú ÌëúÏãú Ìï®Ïàò ================
        function showQuestion(index) {
            console.log(`üìù Î¨∏Ï†ú ${index + 1} ÌëúÏãú Ï§ë...`);
            
            if (index < 0 || index >= allQuestions.length) {
                console.error(`‚ùå ÏûòÎ™ªÎêú Î¨∏Ï†ú Ïù∏Îç±Ïä§: ${index}`);
                return;
            }
            
            currentQuestionIndex = index;
            answerChecked = false;
            const question = allQuestions[index];

            // Î¨∏Ï†ú Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
            document.getElementById('current-question').textContent = index + 1;
            document.getElementById('question-number').textContent = `Î¨∏Ï†ú ${index + 1}`;
            document.getElementById('chapter-info').textContent = `Chapter ${question.chapter}`;
            document.getElementById('current-chapter').textContent = `Ch.${question.chapter}`;

            // Î¨∏Ï†ú ÌÖçÏä§Ìä∏
            document.getElementById('question-text').textContent = question.question;

            // ÏÑ†ÌÉùÏßÄ ÏÉùÏÑ±
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';

            question.options.forEach((option, optIndex) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.onclick = () => selectOption(optIndex);

                optionDiv.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + optIndex)}</div>
                    <div class="option-text">${option}</div>
                `;

                optionsContainer.appendChild(optionDiv);
            });

            // Ï†ïÎãµ ÏÑπÏÖò Ïà®Í∏∞Í∏∞
            document.getElementById('answer-section').classList.remove('show');

            // Î≤ÑÌäº ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
            updateButtonStates();

            // ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
            updateStats();

            // Ïù¥Ï†Ñ ÎãµÎ≥Ä Î≥µÏõê
            if (userAnswers[index] !== undefined) {
                restoreAnswer(userAnswers[index]);
            }
            
            console.log(`‚úÖ Î¨∏Ï†ú ${index + 1} ÌëúÏãú ÏôÑÎ£å`);
        }

        // ================ ÏÑ†ÌÉùÏßÄ ÏÑ†ÌÉù Ìï®Ïàò ================
        function selectOption(optionIndex) {
            if (answerChecked) return;

            console.log(`üéØ ÏòµÏÖò ${optionIndex} ÏÑ†ÌÉùÎê®`);

            // Ïù¥Ï†Ñ ÏÑ†ÌÉù Ìï¥Ï†ú
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));

            // ÏÉà ÏÑ†ÌÉù Ï†ÅÏö©
            document.querySelectorAll('.option')[optionIndex].classList.add('selected');

            // ÎãµÎ≥Ä Ï†ÄÏû•
            userAnswers[currentQuestionIndex] = optionIndex;

            // ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
            updateStats();

            // Ï†ïÎãµ ÌôïÏù∏ Î≤ÑÌäº ÌôúÏÑ±Ìôî
            document.getElementById('check-btn').disabled = false;
        }

        // ================ Ï†ïÎãµ ÌôïÏù∏ Ìï®Ïàò ================
        function checkAnswer() {
            if (userAnswers[currentQuestionIndex] === undefined) {
                alert('ÎãµÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî!');
                return;
            }

            console.log('‚úÖ Ï†ïÎãµ ÌôïÏù∏ Ï§ë...');

            answerChecked = true;
            const question = allQuestions[currentQuestionIndex];
            const userAnswer = userAnswers[currentQuestionIndex];
            const isCorrect = userAnswer === question.correct;

            // ÏÑ†ÌÉùÏßÄ Ïä§ÌÉÄÏùº ÏóÖÎç∞Ïù¥Ìä∏
            const options = document.querySelectorAll('.option');
            options.forEach((option, index) => {
                option.onclick = null; // ÌÅ¥Î¶≠ ÎπÑÌôúÏÑ±Ìôî
                
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === userAnswer && !isCorrect) {
                    option.classList.add('wrong');
                }
            });

            // Ï†ïÎãµ ÌîºÎìúÎ∞± ÌëúÏãú
            showAnswerFeedback(isCorrect, question);

            // Î≤ÑÌäº ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
            updateButtonStates();
        }

        // ================ Ï†ïÎãµ ÌîºÎìúÎ∞± ÌëúÏãú Ìï®Ïàò ================
        function showAnswerFeedback(isCorrect, question) {
            const answerSection = document.getElementById('answer-section');
            const feedback = document.getElementById('answer-feedback');
            
            feedback.innerHTML = `
                <div class="feedback-icon ${isCorrect ? 'correct-icon' : 'wrong-icon'}">
                    ${isCorrect ? '‚úì' : '‚úó'}
                </div>
                <div style="flex: 1;">
                    <strong>${isCorrect ? 'Ï†ïÎãµÏûÖÎãàÎã§!' : 'ÌãÄÎ†∏ÏäµÎãàÎã§.'}</strong><br>
                    <small>Ï†ïÎãµ: ${String.fromCharCode(65 + question.correct)} - ${question.options[question.correct]}</small>
                </div>
            `;

            answerSection.classList.add('show');
        }

        // ================ Ïù¥Ï†Ñ ÎãµÎ≥Ä Î≥µÏõê Ìï®Ïàò ================
        function restoreAnswer(answerIndex) {
            const options = document.querySelectorAll('.option');
            if (options[answerIndex]) {
                options[answerIndex].classList.add('selected');
            }
        }

        // ================ Î≤ÑÌäº ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏ Ìï®Ïàò ================
        function updateButtonStates() {
            const checkBtn = document.getElementById('check-btn');
            const nextBtn = document.getElementById('next-btn');
            const prevBtn = document.getElementById('prev-btn');

            if (answerChecked) {
                checkBtn.style.display = 'none';
                nextBtn.style.display = 'block';
                
                if (currentQuestionIndex === TOTAL_QUESTIONS - 1) {
                    nextBtn.textContent = 'Ï†úÏ∂úÌïòÍ∏∞ üì§';
                    nextBtn.className = 'nav-btn submit-btn';
                } else {
                    nextBtn.textContent = 'Îã§Ïùå Î¨∏Ï†ú ‚û°Ô∏è';
                    nextBtn.className = 'nav-btn next-btn';
                }
            } else {
                checkBtn.style.display = 'block';
                nextBtn.style.display = 'none';
                checkBtn.disabled = userAnswers[currentQuestionIndex] === undefined;
            }

            prevBtn.disabled = currentQuestionIndex === 0;
        }

        // ================ ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏ Ìï®Ïàò ================
        function updateStats() {
            const answeredCount = userAnswers.filter(answer => answer !== undefined).length;
            const remainingCount = TOTAL_QUESTIONS - answeredCount;
            const progressPercent = ((currentQuestionIndex + 1) / TOTAL_QUESTIONS * 100).toFixed(1);

            document.getElementById('answered-count').textContent = answeredCount;
            document.getElementById('remaining-count').textContent = remainingCount;
            document.getElementById('progress-percent').textContent = `${progressPercent}%`;
            document.getElementById('progress-display').textContent = 
                `${currentQuestionIndex + 1}/${TOTAL_QUESTIONS} (${progressPercent}%)`;

            // ÏßÑÌñâÎ•† Î∞î ÏóÖÎç∞Ïù¥Ìä∏
            const progressFill = document.getElementById('progress-fill');
            progressFill.style.width = `${(currentQuestionIndex + 1) / TOTAL_QUESTIONS * 100}%`;
        }

        // ================ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò Ìï®ÏàòÎì§ ================
        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                showQuestion(currentQuestionIndex - 1);
            }
        }

        function nextQuestion() {
            if (currentQuestionIndex === TOTAL_QUESTIONS - 1) {
                showSubmitModal();
            } else if (currentQuestionIndex < TOTAL_QUESTIONS - 1) {
                showQuestion(currentQuestionIndex + 1);
            }
        }

        // ================ Ï†úÏ∂ú Í¥ÄÎ†® Ìï®ÏàòÎì§ ================
        function showSubmitModal() {
            const answeredCount = userAnswers.filter(answer => answer !== undefined).length;
            const unansweredCount = TOTAL_QUESTIONS - answeredCount;

            if (confirm(`ÌÖåÏä§Ìä∏Î•º Ï†úÏ∂úÌïòÏãúÍ≤†ÏäµÎãàÍπå?\n\nÎãµÎ≥Ä ÏôÑÎ£å: ${answeredCount}Í∞ú\nÎØ∏ÎãµÎ≥Ä: ${unansweredCount}Í∞ú\n\nÏ†úÏ∂ú ÌõÑÏóêÎäî ÏàòÏ†ïÌï† Ïàò ÏóÜÏäµÎãàÎã§.`)) {
                submitTest();
            }
        }

        function submitTest() {
            clearInterval(timerInterval);
            
            // Í≤∞Í≥º Í≥ÑÏÇ∞
            let correctAnswers = 0;
            allQuestions.forEach((question, index) => {
                if (userAnswers[index] === question.correct) {
                    correctAnswers++;
                }
            });

            const percentage = Math.round((correctAnswers / TOTAL_QUESTIONS) * 100);
            
            alert(`ÌÖåÏä§Ìä∏ ÏôÑÎ£å!\n\nÏ†ïÎãµ: ${correctAnswers}/${TOTAL_QUESTIONS}\nÏ†êÏàò: ${percentage}%\n\nÍ≤∞Í≥ºÎ•º Î∂ÑÏÑù Ï§ëÏûÖÎãàÎã§...`);
        }

        // ================ ÌÉÄÏù¥Î®∏ Ìï®ÏàòÎì§ ================
        function startTimer() {
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();

                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    alert('ÏãúÍ∞ÑÏù¥ Ï¢ÖÎ£åÎêòÏóàÏäµÎãàÎã§. ÏûêÎèôÏúºÎ°ú Ï†úÏ∂úÎê©ÎãàÎã§.');
                    submitTest();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            const timerElement = document.getElementById('timer');

            timerElement.textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

            if (timeRemaining <= 600) {
                timerElement.style.background = 'linear-gradient(45deg, #dc3545, #c82333)';
            }
        }

        // ================ ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî ================
        window.addEventListener('load', function() {
            console.log('üåü ÌéòÏù¥ÏßÄ Î°úÎìú ÏôÑÎ£å - Ï¥àÍ∏∞Ìôî ÏãúÏûë');
            init();
        });

        // ================ ÌéòÏù¥ÏßÄ ÎÇòÍ∞ÄÍ∏∞ Î∞©ÏßÄ ================
        window.addEventListener('beforeunload', function(e) {
            e.preventDefault();
            e.returnValue = '';
            return '';
        });
    </script>
</body>
</html>
