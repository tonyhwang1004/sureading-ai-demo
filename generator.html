<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¤– SureReading ë¬¸ì œ ìƒì„±ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .generator-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
        }
        
        .question-preview {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .option {
            padding: 8px 15px;
            margin: 5px 0;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .option:hover {
            background: #e9ecef;
        }
        
        .option.correct {
            background: #d4edda;
            border: 2px solid #28a745;
        }
        
        .progress {
            width: 100%;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(45deg, #28a745, #20c997);
            width: 0%;
            transition: width 0.5s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¤– SureReading ë¬¸ì œ ìë™ ìƒì„±ê¸°</h1>
            <p>AIë¥¼ í™œìš©í•œ ê³ í’ˆì§ˆ ì½ê¸° ì´í•´ ë¬¸ì œ ìƒì„±</p>
        </div>

        <div class="generator-section">
            <h2>ğŸ“š ì±… ì •ë³´ ì…ë ¥</h2>
            
            <div class="form-group">
                <label for="bookTitle">ì±… ì œëª©</label>
                <input type="text" id="bookTitle" placeholder="ì˜ˆ: Peppa Pig - Muddy Puddles">
            </div>
            
            <div class="form-group">
                <label for="bookAuthor">ì €ì</label>
                <input type="text" id="bookAuthor" placeholder="ì˜ˆ: Ladybird Books">
            </div>
            
            <div class="form-group">
                <label for="bookLevel">ë ˆë²¨</label>
                <select id="bookLevel">
                    <option value="level1">Level 1 - ê¸°ì´ˆ</option>
                    <option value="level2">Level 2 - ì´ˆê¸‰</option>
                    <option value="level3">Level 3 - ì¤‘ê¸‰</option>
                    <option value="level4">Level 4 - ì¤‘ìƒê¸‰</option>
                    <option value="level5">Level 5 - ê³ ê¸‰</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="bookWords">ë‹¨ì–´ ìˆ˜</label>
                <input type="number" id="bookWords" placeholder="ì˜ˆ: 1200">
            </div>
            
            <div class="form-group">
                <label for="bookSummary">ì±… ìš”ì•½</label>
                <textarea id="bookSummary" rows="4" placeholder="ì±…ì˜ ë‚´ìš©ì„ ê°„ë‹¨íˆ ìš”ì•½í•´ì£¼ì„¸ìš”..."></textarea>
            </div>
            
            <div class="form-group">
                <label for="questionType">ë¬¸ì œ ìœ í˜•</label>
                <select id="questionType">
                    <option value="vocabulary">ì–´íœ˜ ì´í•´</option>
                    <option value="literal">ì‚¬ì‹¤ ì´í•´</option>
                    <option value="inferential">ì¶”ë¡  ì´í•´</option>
                    <option value="critical">ë¹„íŒì  ì‚¬ê³ </option>
                    <option value="synthesis">ì¢…í•© ì´í•´</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="questionCount">ìƒì„±í•  ë¬¸ì œ ìˆ˜</label>
                <input type="number" id="questionCount" value="5" min="1" max="20">
            </div>
            
            <button class="btn" onclick="generateQuestions()">ğŸš€ ë¬¸ì œ ìƒì„±í•˜ê¸°</button>
        </div>

        <div class="generator-section" id="progressSection" style="display: none;">
            <h2>âš™ï¸ ë¬¸ì œ ìƒì„± ì¤‘...</h2>
            <div class="progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <p id="progressText">ì¤€ë¹„ ì¤‘...</p>
        </div>

        <div class="generator-section" id="resultSection" style="display: none;">
            <h2>âœ… ìƒì„±ëœ ë¬¸ì œë“¤</h2>
            <div id="questionsContainer"></div>
            
            <div style="margin-top: 30px; text-align: center;">
                <button class="btn" onclick="downloadQuestions()">ğŸ’¾ JSON ë‹¤ìš´ë¡œë“œ</button>
                <button class="btn" onclick="copyToClipboard()">ğŸ“‹ í´ë¦½ë³´ë“œ ë³µì‚¬</button>
            </div>
        </div>
    </div>

    <script>
        let generatedQuestions = [];

        async function generateQuestions() {
            const bookData = {
                title: document.getElementById('bookTitle').value,
                author: document.getElementById('bookAuthor').value,
                level: document.getElementById('bookLevel').value,
                words: parseInt(document.getElementById('bookWords').value),
                summary: document.getElementById('bookSummary').value
            };

            const questionType = document.getElementById('questionType').value;
            const questionCount = parseInt(document.getElementById('questionCount').value);

            if (!bookData.title || !bookData.author || !bookData.summary) {
                alert('ëª¨ë“  í•„ìˆ˜ í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ì§„í–‰ ìƒí™© í‘œì‹œ
            document.getElementById('progressSection').style.display = 'block';
            document.getElementById('resultSection').style.display = 'none';

            generatedQuestions = [];

            for (let i = 0; i < questionCount; i++) {
                updateProgress(i, questionCount, `ë¬¸ì œ ${i + 1} ìƒì„± ì¤‘...`);
                
                const question = await generateSingleQuestion(bookData, questionType, i);
                if (question) {
                    generatedQuestions.push(question);
                }
                
                // ì‹œë®¬ë ˆì´ì…˜ ë”œë ˆì´
                await new Promise(resolve => setTimeout(resolve, 1000));
            }

            updateProgress(questionCount, questionCount, 'ì™„ë£Œ!');
            displayResults();
        }

        async function generateSingleQuestion(bookData, questionType, index) {
            // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì—¬ê¸°ì„œ Claude API í˜¸ì¶œ
            // í˜„ì¬ëŠ” í…œí”Œë¦¿ ê¸°ë°˜ ë¬¸ì œ ìƒì„±

            const templates = {
                vocabulary: [
                    {
                        question: `In "${bookData.title}", what does the word "adventure" most likely mean?`,
                        options: ["A dangerous journey", "An exciting experience", "A boring day", "A peaceful time"],
                        answer: 1,
                        explanation: "'Adventure'ëŠ” 'ëª¨í—˜, í¥ë¯¸ì§„ì§„í•œ ê²½í—˜'ì„ ì˜ë¯¸í•©ë‹ˆë‹¤."
                    },
                    {
                        question: `What is the meaning of "journey" in the context of "${bookData.title}"?`,
                        options: ["A trip to somewhere", "A difficult test", "A happy moment", "A sad story"],
                        answer: 0,
                        explanation: "'Journey'ëŠ” 'ì—¬í–‰, ì—¬ì •'ì„ ì˜ë¯¸í•©ë‹ˆë‹¤."
                    }
                ],
                literal: [
                    {
                        question: `According to "${bookData.title}", where does the main character live?`,
                        options: ["In a big city", "In a small village", "Near the ocean", "In the mountains"],
                        answer: 1,
                        explanation: "í…ìŠ¤íŠ¸ì—ì„œ ì§ì ‘ ì–¸ê¸‰ëœ ì¥ì†Œ ì •ë³´ì…ë‹ˆë‹¤."
                    },
                    {
                        question: `What is the main character's name in "${bookData.title}"?`,
                        options: ["Tommy", "Sarah", "Main character", "The author doesn't mention"],
                        answer: 2,
                        explanation: "ì£¼ì¸ê³µì˜ ì´ë¦„ì— ëŒ€í•œ ëª…ì‹œì  ì •ë³´ë¥¼ ì°¾ëŠ” ë¬¸ì œì…ë‹ˆë‹¤."
                    }
                ],
                inferential: [
                    {
                        question: `How does the main character in "${bookData.title}" probably feel at the end?`,
                        options: ["Sad and disappointed", "Happy and satisfied", "Angry and frustrated", "Confused and worried"],
                        answer: 1,
                        explanation: "ë“±ì¥ì¸ë¬¼ì˜ ê°ì •ì„ ë¬¸ë§¥ì„ í†µí•´ ì¶”ë¡ í•˜ëŠ” ë¬¸ì œì…ë‹ˆë‹¤."
                    }
                ],
                critical: [
                    {
                        question: `What is the main theme of "${bookData.title}"?`,
                        options: ["The importance of friendship", "The power of imagination", "The value of hard work", "The beauty of nature"],
                        answer: 0,
                        explanation: "ê¸€ ì „ì²´ì˜ ì£¼ì œë‚˜ êµí›ˆì„ íŒŒì•…í•˜ëŠ” ë¬¸ì œì…ë‹ˆë‹¤."
                    }
                ],
                synthesis: [
                    {
                        question: `What lesson can we learn from "${bookData.title}"?`,
                        options: ["Never give up on your dreams", "Always listen to your parents", "Money is the most important thing", "It's better to be alone"],
                        answer: 0,
                        explanation: "ì´ì•¼ê¸°ì—ì„œ ì–»ì„ ìˆ˜ ìˆëŠ” êµí›ˆì´ë‚˜ ì‚¶ì˜ ì§€í˜œë¥¼ ë¬»ëŠ” ë¬¸ì œì…ë‹ˆë‹¤."
                    }
                ]
            };

            const typeTemplates = templates[questionType] || templates.literal;
            const template = typeTemplates[index % typeTemplates.length];

            return {
                ...template,
                type: questionType,
                difficulty: getDifficultyByLevel(bookData.level),
                questionId: `${bookData.title.replace(/\s+/g, '_')}_${questionType}_${index + 1}`
            };
        }

        function getDifficultyByLevel(level) {
            const difficultyMap = {
                level1: 'easy',
                level2: 'easy',
                level3: 'medium',
                level4: 'medium',
                level5: 'hard'
            };
            return difficultyMap[level] || 'medium';
        }

        function updateProgress(current, total, message) {
            const percentage = (current / total) * 100;
            document.getElementById('progressBar').style.width = percentage + '%';
            document.getElementById('progressText').textContent = message;
        }

        function displayResults() {
            document.getElementById('progressSection').style.display = 'none';
            document.getElementById('resultSection').style.display = 'block';

            const container = document.getElementById('questionsContainer');
            container.innerHTML = '';

            generatedQuestions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-preview';
                questionDiv.innerHTML = `
                    <h4>ë¬¸ì œ ${index + 1} (${question.type} - ${question.difficulty})</h4>
                    <p><strong>Q:</strong> ${question.question}</p>
                    <div class="options">
                        ${question.options.map((option, optIndex) => 
                            `<div class="option ${optIndex === question.answer ? 'correct' : ''}">${optIndex + 1}. ${option}</div>`
                        ).join('')}
                    </div>
                    <p><strong>í•´ì„¤:</strong> ${question.explanation}</p>
                `;
                container.appendChild(questionDiv);
            });
        }

        function downloadQuestions() {
            const questionsData = {
                bookId: document.getElementById('bookTitle').value.replace(/\s+/g, '_'),
                totalChapters: 1,
                generatedAt: new Date().toISOString(),
                level: document.getElementById('bookLevel').value,
                chapters: {
                    "0": {
                        chapterTitle: "Generated Questions",
                        questionCount: generatedQuestions.length,
                        questions: generatedQuestions
                    }
                }
            };

            const blob = new Blob([JSON.stringify(questionsData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${questionsData.bookId}_questions.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        function copyToClipboard() {
            const questionsData = {
                bookId: document.getElementById('bookTitle').value.replace(/\s+/g, '_'),
                totalChapters: 1,
                generatedAt: new Date().toISOString(),
                level: document.getElementById('bookLevel').value,
                chapters: {
                    "0": {
                        chapterTitle: "Generated Questions",
                        questionCount: generatedQuestions.length,
                        questions: generatedQuestions
                    }
                }
            };

            navigator.clipboard.writeText(JSON.stringify(questionsData, null, 2)).then(() => {
                alert('ğŸ“‹ JSON ë°ì´í„°ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            });
        }
    </script>
</body>
</html>
